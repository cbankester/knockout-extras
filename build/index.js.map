{"version":3,"file":"index.js","sources":["..//Users/cbankester/Work/code/js/knockout-jsonapi-utils/src/ko-extenders.js","..//Users/cbankester/Work/code/js/knockout-jsonapi-utils/src/json-api-utils.js","..//Users/cbankester/Work/code/js/knockout-jsonapi-utils/src/ko-form-base.js","..//Users/cbankester/Work/code/js/knockout-jsonapi-utils/src/index.js"],"sourcesContent":["import Fraction from 'fraction.js';\nimport humanizeDuration from 'humanize-duration';\nimport moment from 'moment';\n\nconst extenders = {};\n\nfunction dispose(obj) {\n  obj.dispose();\n}\n\n/**\n * Attaches disposables array to `target`.\n *\n * disposables holds a list of computeds/subscribers that should be disposed\n * when `target` is disposed\n * @name setupObservableDisposables\n * @param {ko.observable} target\n * @private\n*/\n\nfunction setupObservableDisposables(target) {\n  if (target.disposables) return;\n  target.disposables = [];\n  target.dispose_sub_observables = () => setTimeout(() => {\n    target.disposables.forEach(dispose);\n  });\n}\n\n/**\n * Creates a Knockout.js extender\n * @name setupExtender\n * @param {string} extender_name - The name of the extender\n * @param {Function} extender_fn - The extender function\n * @param {Object} [opts]\n * @param {Array.<string>} [opts.incompatible_extenders] - Array of extender\n * names that should not be applied along with `extender_name`\n * @throws {Error} Throws an error if any extenders have been applied that are\n * in `incompatible_extenders`\n * @private\n * @return {ko.observable} The result of calling `extender_fn` with arguments\n * passed to the extender\n*/\n\nfunction setupExtender(extender_name, extender_fn, opts) {\n  function extender(target, ...args) {\n    const applied_extenders = target.applied_extenders || [];\n    if (opts && opts.incompatible_extenders && applied_extenders.length) {\n      opts.incompatible_extenders.forEach(incompatible_extender => {\n        if (~applied_extenders.indexOf(incompatible_extender)) {\n          throw new Error(`KO Extender ${extender_name} is not compatible with ${incompatible_extender}`);\n        }\n      });\n    }\n    applied_extenders.push(extender_name);\n    target.applied_extenders = applied_extenders;\n    return extender_fn(target, ...args);\n  }\n\n  // set the name of the extender function to extender_name (for readability\n  // in stack traces and such)\n  Object.defineProperty(extender, 'name', {\n    enumerable: false,\n    configurable: true,\n    writable: false,\n    value: extender_name\n  });\n\n  extenders[extender_name] = extender;\n}\n\n/**\n * Wraps `target` in a `ko.pureComputed` that sanitizes values written to\n * `target` with the given `sanitize_fn` function\n * @name computedSanitizeProxy\n * @param {ko.observable} target\n * @param {Function} sanitize_fn\n * @private\n * @return {ko.pureComputed} The proxying function\n*/\n\nfunction computedSanitizeProxy(target, sanitize_fn) {\n  const result = ko.pureComputed({\n    read: target,\n    write(new_val) {\n      if (new_val) {\n        const current = target();\n        const val_to_write = sanitize_fn(new_val);\n\n        if (val_to_write !== current) {\n          // if the sanitized value is different from the current value,\n          // pass the value into target\n          target(val_to_write);\n        } else if (new_val !== current) {\n          // if the sanitized value is the same as the current value, but is\n          // different from what the user gave us, force target to reset to the\n          // sanitized val\n          target.notifySubscribers(val_to_write);\n        }\n      } else {\n        target(new_val);\n      }\n    }\n  }).extend({notify: 'always'});\n\n  // Idempotently create a disposables array on target\n  setupObservableDisposables(target);\n\n  // The extender will be returning result instead of target, so we need to make\n  // result have a similar interface as target by copying over target's\n  // properties that are relevant to extension\n  Object.assign(result, {\n    hasError: target.hasError,\n    has_focus: target.has_focus,\n    has_had_focus: target.has_had_focus,\n    validationMessage: target.validationMessage,\n    initial_value: target.initial_value,\n    disposables: target.disposables,\n    dispose_sub_observables: target.dispose_sub_observables,\n    sanitize: sanitize_fn\n  });\n\n  // Run target through the proxy, to sanitize the initial value and whatnot\n  result(target());\n\n  // since result is itself a computed, push it onto the array of things to be\n  // disposed of when target is disposed\n  result.disposables.push(result);\n\n  result.initial_value && result.initial_value(result());\n  return result;\n}\n\n/**\n * @name typeObservableFunction\n * @param {string} type\n * @private\n * @return {Object} Object with keys `type` (string) and `observable`\n * (ko.observable)\n*/\n\nfunction typeObservableFunction(type) {\n  return {type, observable: ko.observable()};\n}\n\n/**\n * Attaches validation-related observables to the suppplied observable:\n *\n * `.errors` (ko.observableArray) - the array of errors tracked with this\n * observable\n *\n * `.hasError` (ko.computed) - true if any of the observables errors are true\n *\n * `.validationMessage` (ko.computed) - The message from the first true error of\n * `.errors` array\n * @name setupValidationObservables\n * @param {ko.observable} target\n * @private\n * @return {Function} Returning Object with keys `type` (string) and\n * `observable` (ko.observable)\n*/\n\nfunction setupValidationObservables(target) {\n  if (target.validationMessage) return typeObservableFunction;\n  setupObservableDisposables(target);\n  target.errors = ko.observableArray([]);\n\n  // hasError: true if one of the validations on this observable fails\n  target.hasError = ko.computed(() => target.errors().some(({observable: o}) => o()));\n  target.disposables.push(target.hasError);\n\n  // validationMessage: the message from the first failing validation\n  target.validationMessage = ko.computed(() => {\n    const first_invalid = target.errors().find(({observable: o}) => o());\n    return first_invalid && first_invalid.observable();\n  });\n  target.disposables.push(target.validationMessage);\n\n  return typeObservableFunction;\n}\n\n/**\n * Adds `initial_value` observable to `target`\n *\n * When `target.initial_value` is called with a parameter, it and `target` are\n * both updated\n *\n * If `target` has a `sanitize` function, any parameter that passes through\n * `target.initial_value` is first passed through `sanitize`\n * @name ko.extenders.initial_value\n * @param {ko.observable} target\n * @param {anything} initial_value - The value to initialize `target` to\n * @return {ko.observable} The extended `target`\n*/\n\nsetupExtender('initial_value', (target, init_val) => {\n  setupObservableDisposables(target);\n\n  // so we can track when the sanitizer is being called repeatedly\n  let [sanitize_count, first_pass_unsanitized_value] = [0, null];\n\n  const initial_value_observable = ko.observable().extend({notify: 'always'});\n\n  function sanitizeAndInitializeTarget(new_val) {\n    // pass val through target's sanitizer, if it exists.\n    const val = target.sanitize ? target.sanitize(new_val) : new_val;\n    if (val !== target()) {\n      // target's current value is not sanitized. First, check to make sure we\n      // didn't already try to sanitize this value.\n\n      if (sanitize_count) {\n        // if sanitize_count is greater than 0, it means we just tried to\n        // initialize, the initializer needed to sanitize, initializer was\n        // called again, and it needed sanitizing again. This means the\n        // sanitizer did not sanitize an already-sanitized value to the same\n        // value, which would result in an infinite loop. Throw an error!\n\n        throw Object.assign(new Error('Target\\'s sanitize function is not idempotent.'), {\n          target,\n          first_pass_unsanitized_value,\n          second_pass_unsanitized_value: val\n        });\n      }\n\n      sanitize_count += 1;\n      // set target to the sanitized value and re-initialize\n      target(val);\n      first_pass_unsanitized_value = new_val;\n      sanitizeAndInitializeTarget(val);\n    } else {\n      // target's value is sanitized\n      // unset our counter and first unsanitized value, if they're set\n      [sanitize_count, first_pass_unsanitized_value] = [0, null];\n\n      // Update target.initial_value if it's not already. Doing so will trigger\n      // sanitizeAndInitializeTarget to run again, but when it does, this check\n      // will not pass, and the chain of events will stop\n      val !== target.initial_value() && target.initial_value(val);\n    }\n  }\n  if (target.initial_value) {\n    const index = target.disposables.indexOf(target.initial_value);\n    if (~index) {\n      const [old_computed] = target.disposables.splice(index, 1);\n      old_computed && old_computed.dispose();\n    }\n  }\n\n  target.initial_value = ko.computed({\n    read: initial_value_observable,\n    write(new_val) {\n      initial_value_observable(new_val);\n      sanitizeAndInitializeTarget(new_val);\n    }\n  });\n  target.disposables.push(target.initial_value);\n  target.initial_value(init_val);\n  return target;\n});\n\n/**\n * Adds `postable_name` to `target`\n * @name ko.extenders.postable\n * @param {ko.observables} target\n * @param {string} postable_name\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('postable', (target, postable_name) => {\n  target.postable_name = postable_name;\n  return target;\n});\n\n/**\n * Adds initial_length observable to `target`, initialized to `initial_length`\n * @name ko.extenders.initial_length\n * @param {ko.observable} target\n * @param {number} initial_length - The value to initialize\n * `target.initial_length` with\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('initial_length', (target, initial_length) => {\n  target.initial_length = ko.observable(initial_length);\n  return target;\n});\n\n/**\n * Subscribes fn to target\n * @name ko.extenders.after_change\n * @param {ko.observable} target\n * @param {Function} fn\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('after_change', (target, fn) => {\n  setupObservableDisposables(target);\n  target.disposables.push(target.subscribe(fn));\n  return target;\n});\n\n\n/**\n * Subscribes fn to target, to be called before target changes\n * @name ko.extenders.before_change\n * @param {ko.observable} target\n * @param {Function} fn\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('before_change', (target, fn) => {\n  setupObservableDisposables(target);\n  target.disposables.push(target.subscribe(fn, null, 'beforeChange'));\n  return target;\n});\n\n/**\n * Adds a validation observable which returns `false` if `target()` is empty,\n * `null` otherwise\n * @name ko.extenders.required\n * @param {ko.observable} target\n * @param {(Object|string)} [opts] - Options or validation message\n * @param {string} [opts.message=\"This field is required\"] - The validation\n * message\n * @param {(Function|ko.computed)} [opts.enable_when] - Bool-returning function\n * to dictate when validation should be enabled\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('required', (target, opts) => {\n  const validation_obj = setupValidationObservables(target)('required');\n  let message, enabled;\n\n  if (typeof opts === 'string' || !opts) {\n    message = opts;\n    enabled = () => true;\n  } else {\n    message = opts.message;\n    enabled = opts.enable_when || (() => true);\n    enabled.dispose && target.disposables.push(enabled);\n  }\n\n  target.errors.push(validation_obj);\n\n  function validate(new_val) {\n    if (new_val || new_val === 0 || !enabled()) {\n      validation_obj.observable(null);\n    } else {\n      validation_obj.observable(message || 'This field is required');\n    }\n  }\n\n  validate(target());\n\n  target.disposables.push(target.subscribe(validate));\n\n  enabled.subscribe && target.disposables.push(enabled.subscribe(() => validate(target())));\n\n  return target;\n});\n\n/**\n * Adds a validation observable which returns `false` if `target()` is not an\n * email, `null` otherwise\n * @name ko.extenders.email\n * @param {ko.observable} target\n * @param {string} [message=\"Invalid email address. Must be of the form\n * 'john@website.com'\"] - The validation message\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('email', (target, message) => {\n  const validation_obj = setupValidationObservables(target)('email');\n  target.errors.push(validation_obj);\n\n  const re = new RegExp(/^\\S+@\\S+\\.\\S+$/);\n\n  function validate(new_val) {\n    if (new_val || new_val === 0) {\n      if (re.test(new_val)) {\n        validation_obj.observable(null);\n      } else {\n        validation_obj.observable(message || 'Invalid email address. Must be of the form \\'john@website.com\\'');\n      }\n    } else {\n      validation_obj.observable(null);\n    }\n  }\n\n  validate(target());\n\n  target.disposables.push(target.subscribe(validate));\n\n  return target;\n});\n\n/**\n * Adds a validation observable which returns `false` if `target()` is not a\n * phone number, `null` otherwise\n *\n * Reformats correct phone numbers as \"(nnn) nnn-nnnn\"\n * @name ko.extenders.phone\n * @param {ko.observable} target\n * @param {string} [message=\"Invalid phone number. Must be 10 digits\"] - The\n * validation message\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('phone', (target, message) => {\n  const validation_obj = setupValidationObservables(target)('phone');\n  target.errors.push(validation_obj);\n  const re = new RegExp(/^((\\d)?(\\d{3}))?(\\d{3})(\\d{4})$/);\n\n  function validate(new_val) {\n    if (new_val && typeof new_val === 'string') {\n      const matches = new_val.replace(/[+()\\s.-]*/g, '').match(re);\n      if (matches) {\n        if (matches[2]) {\n          validation_obj.observable(message || 'Invalid phone number. Must be 10 digits');\n        } else if (matches[3]) {\n          target(`(${matches[3]}) ${matches[4]}-${matches[5]}`);\n          validation_obj.observable(null);\n        } else {\n          validation_obj.observable(message || 'Invalid phone number. Must be 10 digits');\n        }\n      } else {\n        validation_obj.observable(message || 'Invalid phone number. Must be 10 digits');\n      }\n    } else {\n      validation_obj.observable(null);\n    }\n  }\n\n  validate(target());\n\n  target.disposables.push(target.subscribe(validate));\n\n  return target;\n});\n\n/**\n * Adds a validation observable which returns `false` if `target()` is not\n * unique in `uniq_in` mapped to `options.attribute_name`, `null` otherwise\n * @name ko.extenders.unique\n * @param {ko.observable} target\n * @param {Object} opts\n * @param {(Array|ko.observableArray)} opts.uniq_in - The array to assert\n * uniqueness in\n * @param {string} opts.attribute_name - The key whose matching value (in the\n * elements of `uniq_in`) must not equal `target()`\n * @param {string} [opts.message=\"Must be unique\"] - The validation message\n * @return {ko.observable} The extended target\n * @throws {Error} Throws an error if called without `opts` parameter\n*/\n\nsetupExtender('unique', (target, opts) => {\n  if (!opts) {\n    throw new Error('Cannot determine uniqueness of target without opts.uniq_in and opts.attribute_name');\n  }\n  const {uniq_in, attribute_name, message} = opts || {};\n  const validation_obj = setupValidationObservables(target)('unique');\n  target.errors.push(validation_obj);\n\n  function validate(mapped_array) {\n    const val = target();\n    if (val || val === 0) {\n      const duplicated = mapped_array.filter(attr => attr === val).length > 1;\n      if (duplicated) {\n        validation_obj.observable(message || 'Must be unique');\n      } else {\n        validation_obj.observable(null);\n      }\n    } else {\n      validation_obj.observable(null);\n    }\n  }\n\n  const computed = ko.computed(() => ko.unwrap(uniq_in).map(obj => ko.unwrap(obj[attribute_name])));\n\n  const computed_subscriber = computed.subscribe(validate);\n\n  target.disposables.push(computed, computed_subscriber);\n\n  return target;\n});\n\n/**\n * @name ko.extenders.numeric\n * @param {ko.observable} target\n * @param {Object} [opts]\n * @param {number} [opts.precision] - The number of decimals to allow when\n * enforcing numericality\n * @param {string} [opts.sign] - The sign of the number to allow when enforcing\n * numericality\n * @param {(number|string)} [opts.default] - The default value to use if\n * `target` is updated with `null`, `undefined` or `\"\"`\n * @param {boolean} [opts.allow_rational=false] - Whether or not to allow the\n * number to be a fraction\n * @return {ko.pureComputed} Computed wrapper around target\n*/\n\nsetupExtender('numeric', function numeric(target, opts) {\n  const {precision, sign, default: default_val, allow_rational} = opts || {};\n  const multiplier = precision && Math.pow(10, precision) || null;\n\n  function stripDisallowedCharacters(value) {\n    if (allow_rational) {\n      return value && String(value).replace(/[^\\d\\.\\/]/g, '') || null;\n    }\n    return value && String(value).replace(/[^\\d\\.]/g, '') || null;\n  }\n\n  function sanitize(value) {\n    let out = stripDisallowedCharacters(value);\n\n    if (out === null && (default_val || default_val === 0)) {\n      out = String(default_val);\n    }\n\n    if (out) {\n      const is_rational = Boolean(~out.indexOf('/'));\n      try {\n        is_rational && (out = new Fraction(out));\n      } catch (e) {\n        if (e === 'Invalid Param') {\n          return sanitize(null);\n        }\n        throw e;\n      }\n      !is_rational && multiplier && (out = Math.round(Number.parseFloat(+out) * multiplier) / multiplier);\n      !is_rational && precision === 0 && (out = Number.parseInt(out, 10));\n      sign === 'positive' && (out = !is_rational && Math.abs(out) || out.abs());\n      sign === 'negative' && (out = !is_rational && -Math.abs(out) || out.abs().mul(-1));\n      is_rational && (out = out.toFraction());\n    }\n    return out;\n  }\n\n  // Attach the sanitizer to target so that any extenders that have been applied\n  // before this extender can have access to it.\n  //\n  // TODO we should make sure this sanitizer doesn't interfere with other\n  // sanitizers that may have been created for other extenders. Perhaps\n  // something like a sanitizers array and a sanitize function that just applies\n  // the sanitizers one-by-one\n  Object.assign(target, {sanitize});\n\n  return computedSanitizeProxy(target, sanitize);\n}, {\n  incompatible_extenders: ['duration', 'time']\n});\n\nconst days_in_year = 365;\nconst days_in_month = 30;\nconst days_in_week = 7;\n\nconst millis_in_second = 1000;\nconst millis_in_minute = 60 * millis_in_second;\nconst millis_in_hour = 60 * millis_in_minute;\nconst millis_in_day = 24 * millis_in_hour;\nconst millis_in_week = days_in_week * millis_in_day;\nconst millis_in_month = days_in_month * millis_in_day;\nconst millis_in_year = days_in_year * millis_in_day;\n\n/**\n * Returns the number of milliseconds represented by the human-readable date `str`\n *\n * E.g. `str === \"1 year 2 months 3 weeks 4 days 5 hours 6 minutes 7 seconds\"`\n * @param {string} str - The string to parse into milliseconds\n * @private\n * @return {number} The milliseconds parsed from str\n*/\n\nfunction getMillisecondsFromString(str) {\n  let millis = 0;\n  if (str.match(/[^\\d\\.]/)) { // string contains non-number characters\n    let tmp;\n    const years = (tmp = str.match(/((\\d*\\.)?\\d+)\\s*y/i)) && tmp[1] || 0;\n    const months = (tmp = str.match(/((\\d*\\.)?\\d+)\\s*mo/i)) && tmp[1] || 0;\n    const weeks = (tmp = str.match(/((\\d*\\.)?\\d+)\\s*w/i)) && tmp[1] || 0;\n    const days = (tmp = str.match(/((\\d*\\.)?\\d+)\\s*d/i)) && tmp[1] || 0;\n    const hours = (tmp = str.match(/((\\d*\\.)?\\d+)\\s*h/i)) && tmp[1] || 0;\n    const minutes = (tmp = str.match(/((\\d*\\.)?\\d+)\\s*(m\\s|m$|mi)/i)) && tmp[1] || 0;\n    const seconds = (tmp = str.match(/((\\d*\\.)?\\d+)\\s*s/i)) && tmp[1] || 0;\n\n    millis += Number.parseInt(seconds, 0) * millis_in_second;\n    millis += Number.parseInt(minutes, 0) * millis_in_minute;\n    millis += Number.parseInt(hours, 0) * millis_in_hour;\n    millis += Number.parseInt(days, 0) * millis_in_day;\n    millis += Number.parseInt(weeks, 0) * millis_in_week;\n    millis += Number.parseInt(months, 0) * millis_in_month;\n    millis += Number.parseInt(years, 0) * millis_in_year;\n\n  } else { // str contains no non-number characters\n    const num_days = Number.parseInt(str, 10);\n    num_days && (millis = millis_in_day * num_days);\n  }\n\n  return millis;\n}\n\n/**\n * Returns a human-readable string from the given milliseconds\n * @name humanizeMilliseconds\n * @param {number} millis\n * @param {Object} [opts]\n * @param {Array.<string>} [opts.units=['y', 'mo', 'w', 'd', 'h', 'm', 's']] -\n * The duration units to use when converting the string\n * @param {string} [opts.delimiter=\" \"] - The delimiter to insert between two\n * duration units\n * @param {Boolean} [opts.round=false] - Whether or not to round\n * @private\n * @return {string} The milliseconds represented as a string\n*/\n\nfunction humanizeMilliseconds(millis, opts) {\n  const {units, delimiter, round} = opts || {};\n  return humanizeDuration(millis, {\n    delimiter: delimiter || ' ',\n    units: units || ['y', 'mo', 'w', 'd', 'h', 'm', 's'],\n    round: !!round,\n    unitMeasures: {\n      y: millis_in_year,\n      mo: millis_in_month,\n      w: millis_in_week,\n      d: millis_in_day,\n      h: millis_in_hour,\n      m: millis_in_minute,\n      s: millis_in_second\n    }\n  });\n}\n\n/**\n * Returns a human-readable string from the given human-readable string\n *\n * If the provided string is not parseable, returns an empty string\n *\n * All options are passed to `humanizeDuration`\n * @name sanitizeDuration\n * @param {string} val - The string to sanitize\n * @param {Object} [opts] - Options passed to humanizeDuration\n * @private\n * @return {string} The sanitized human-readable duration string\n*/\n\nfunction sanitizeDuration(val, opts) {\n  const out = humanizeMilliseconds(getMillisecondsFromString(val), opts || {});\n  return out[0] === '0' ? '' : out;\n}\n\n/**\n * Enforces/coerces `target`'s value into a human-readable duration\n * @name ko.extenders.duration\n * @param {ko.observable} target\n * @param {Object} [opts]\n * @param {Array.<string>} [opts.units=['y', 'mo', 'w', 'd', 'h', 'm', 's']] -\n * The duration units to use when converting the string\n * @param {string} [opts.delimiter=\" \"] - The delimiter to insert between two\n * duration units\n * @param {Boolean} [opts.round=false] - Whether or not to round\n * @return {ko.pureComputed} Computed wrapper around target\n*/\n\nsetupExtender('duration', function duration(target, opts) {\n  const {units, delimiter, round} = opts || {};\n  let sanitized_units;\n  if (units) {\n    sanitized_units = units.map(u => {\n      switch (u.slice(0, 2)) {\n      case 'y':\n      case 'ye':\n        return 'y';\n      case 'mo':\n        return 'mo';\n      case 'w':\n      case 'we':\n        return 'w';\n      case 'd':\n      case 'da':\n        return 'd';\n      case 'h':\n      case 'ho':\n        return 'h';\n      case 'm':\n      case 'mi':\n        return 'm';\n      case 's':\n      case 'se':\n        return 's';\n      default:\n        return null;\n      }\n    })\n    .filter(u => u);\n\n    !sanitized_units.length && (sanitized_units = null);\n  }\n\n  function sanitize(val) {\n    const opts = {};\n    sanitized_units && (opts.units = sanitized_units);\n    delimiter || delimiter === '' && (opts.delimiter = delimiter);\n    round && (opts.round = round);\n    return sanitizeDuration(val, opts);\n  }\n\n  // Attach the sanitizer to target so that any extenders that have been applied\n  // before this extender can have access to it.\n  //\n  // TODO we should make sure this sanitizer doesn't interfere with other\n  // sanitizers that may have been created for other extenders. Perhaps\n  // something like a sanitizers array and a sanitize function that just applies\n  // the sanitizers one-by-one\n  Object.assign(target, {sanitize});\n\n  return computedSanitizeProxy(target, sanitize);\n}, {\n  incompatible_extenders: ['numeric', 'time']\n});\n\n/**\n * Enfoce/coerce the `target` into a time\n * @name ko.extenders.time\n * @param {ko.observable} target\n * @param {Object} [opts]\n * @param {string} [opts.format=\"HH:mm A\"] - The format to enforce the time with\n * @return {ko.pureComputed} Computed wrapper around target\n*/\n\nsetupExtender('time', function time(target, opts) {\n  const {format} = opts || {format: 'HH:mm A'};\n  function sanitize(val) {\n    return moment(val, format).format(format);\n  }\n\n  // Attach the sanitizer to target so that any extenders that have been applied\n  // before this extender can have access to it.\n  //\n  // TODO we should make sure this sanitizer doesn't interfere with other\n  // sanitizers that may have been created for other extenders. Perhaps\n  // something like a sanitizers array and a sanitize function that just applies\n  // the sanitizers one-by-one\n  Object.assign(target, {sanitize});\n\n  return computedSanitizeProxy(target, sanitize);\n}, {\n  incompatible_extenders: ['numeric', 'duration']\n});\n\n/**\n * Attaches `no_pending_changes` ko.computed to `target`.\n *\n * `target.no_pending_changes` returns true if:\n *\n * `target` is a ko.observableArray and all elements (e) of `target()` satisfy\n * `e.no_pending_changes() === true`\n *\n * or\n *\n * `target` is not a ko.observableArray and target().no_pending_changes === true\n * @name ko.extenders.no_pending_changes\n * @param {ko.observable|ko.observableArray} target\n * @return {ko.observable|ko.observableArray} The extended target\n*/\n\nsetupExtender('watch_for_pending_changes', (target) => {\n  setupObservableDisposables(target);\n  if ('push' in target) {\n    target.no_changes_pending = ko.computed(() => {\n      return target().every(r => r.loading && r.loading() || r.no_changes_pending());\n    }).extend({notify: 'always'});\n  } else {\n    target.no_changes_pending = ko.computed(() => {\n      const obj = target();\n      if (obj && !obj.loading()) {\n        return obj.no_changes_pending();\n      }\n      return true;\n    }).extend({notify: 'always'});\n  }\n\n  target.disposables.push(target.no_changes_pending);\n  return target;\n});\n\n/**\n * Adds `noUnset` key to `target`, initialized to `val`\n * @name ko.extenders.noUnset\n * @param {ko.observable} target\n * @param {string} val\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('noUnset', (target, val) => {\n  target.noUnset = val;\n  return target;\n});\n\n/**\n * Adds an `addNew` method to `target`.\n * @name ko.extenders.pushable\n * @param {ko.observable} target\n * @param {Object} opts\n * @param {Function} opts.klass - The class to instanciate when `addNew` is\n * called.\n * @param {Object} opts.this_arg - The object to bind functions which appear in\n * `opts.args` to. `this_arg` will also be used as the first parameter when\n * instanciating a new `opts.klass`.\n * @param {Array} [opts.args] - The arguments to pass to `klass` when\n * instanciating. Any elements of `opts.args` passing `typeof arg === function`\n * will be called with `this_arg` as the scope\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('pushable', (target, opts) => {\n  const {klass, this_arg} = opts || {};\n  const args = opts.args || [];\n  if (!klass) {\n    throw new Error('Cannot define addNew method without knowing the class to instanciate');\n  }\n  if (!this_arg) {\n    throw new Error('Cannot define addNew method without knowing first parameter to instanciate klass with');\n  }\n  if ('push' in target) {\n    target.addNew = function addNew() {\n      return new Promise(resolve => {\n        const record = new klass(this_arg, ...(args.map(arg => typeof arg === 'function' ? arg.call(this_arg) : arg)));\n        if ('doneLoading' in record) {\n          record.doneLoading().then(() => {\n            target.push(record);\n            resolve();\n          });\n        } else {\n          target.push(record);\n          resolve();\n        }\n      });\n    };\n  }\n  return target;\n});\n\n/**\n * Adds `nestable_name` and `resource_name` keys to `target`\n * @name ko.extenders.nestable\n * @param {ko.observable} target\n * @param {string} resource_name\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('nestable', (target, resource_name) => {\n  target.resource_name = resource_name;\n  target.nestable_name = `${resource_name}_attributes`;\n  return target;\n});\n\n/**\n * Adds `target.has_focus` observable to be used for focus-tracking\n *\n * `target.has_focus` should be bound with the `hasFocus` binding to a focusable\n * DOM element\n * @name ko.extenders.track_focus\n * @param {ko.observable} target\n * @param {Object} [opts]\n * @param {boolean} [opts.track_has_had] - Whether or not to create an\n * observable `target.has_had_focus` that tracks whether `target.has_focus` was\n * ever true\n * @return {ko.observable} The extended target\n*/\n\nsetupExtender('track_focus', (target, opts) => {\n  const {track_has_had} = opts || {};\n  target.has_focus = ko.observable(false);\n  if (track_has_had) {\n    target.has_had_focus = ko.observable(false);\n    const s = target.has_focus.subscribe(has_focus => {\n      if (!has_focus) { // just blurred out of input\n        target.has_had_focus(true);\n        s.dispose();\n      }\n    });\n    target.disposables.push(s);\n  }\n  return target;\n});\n\nexport default extenders;\n","import ko from 'ko';\n\nfunction _get_included(included){\n  return ({id, type}) => included.find(v => {\n    return (\n      Number.parseInt(v.id, 10) === Number.parseInt(id, 10)\n    ) && v.type === type;\n  });\n}\n\nfunction _build_relationship(vm, get_included_record){\n  return ({rel_name, rel_data, client_defined_relationship, obs}) => {\n    return build_relationship(vm, rel_name, rel_data, obs, {\n      client_defined_relationship,\n      get_included_record\n    });\n  };\n}\n\nfunction _init_relationship(vm, client_defined_relationships){\n  return ([rel_name, rel_data]) => init_relationship(\n    vm,\n    rel_name,\n    rel_data,\n    client_defined_relationships\n  );\n}\n\nfunction _remap_with_included_records(record, {get_included_record, immybox, nested_immybox_relationships}={}) {\n  let ret = get_included_record ? (get_included_record(record) || record) : record;\n\n  Object.assign(ret, ret.attributes, {\n    id: Number.parseInt(ret.id, 10),\n    type: ret.type\n  });\n\n  if (ret.relationships) {\n    let {relationships} = ret;\n    for (const relationship_name in relationships) {\n      let relationship = relationships[relationship_name];\n      let {data} = relationship;\n      let opts = {\n        get_included_record,\n        nested_immybox_relationships,\n        immybox: (nested_immybox_relationships || []).includes(relationship_name)\n      };\n      if (data instanceof Array)\n        ret[relationship_name] = data.map(item => _remap_with_included_records(item, opts));\n      else if (data)\n        ret[relationship_name] = _remap_with_included_records(data, opts);\n      else\n        ret[relationship_name] = null;\n    }\n  }\n\n  if (immybox)\n    Object.assign(ret, {\n      value: ret[immybox.value || 'id'],\n      text: ret[immybox.text || 'name']\n    });\n\n  return ret;\n}\n\nfunction _encode_uri(url, obj) {\n  if (Object.keys(obj).length === 0) return url;\n  let str = '';\n  for (let key in obj) {\n    if (str !== '') str += '&';\n    str += `${key}=${encodeURIComponent(obj[key])}`;\n  }\n  return `${url}?${str}`;\n}\n\nfunction _base_request(resolve, reject) {\n  let request = new XMLHttpRequest();\n  request.onreadystatechange = function() {\n    if (this.readyState === 4) // done\n      if (this.status >= 200 && this.status < 400)\n        try {\n          resolve(JSON.parse(this.response || 'null'));\n        } catch (e) {\n          resolve(null);\n        }\n      else\n        reject(this);\n  };\n  request.onerror = function() {\n    reject(this);\n  };\n  return request;\n}\n\nexport class RequestError extends Error {\n  constructor(xhr) {\n    let message, errors_from_server, json, responseText;\n    let name = 'RequestError';\n\n    try {\n      json = JSON.parse(xhr.responseText || 'null');\n    } catch (e) {\n      json = null;\n    } finally {\n      if (xhr.responseText) responseText = xhr.responseText;\n    }\n\n    if (json && json.errors) {\n      errors_from_server = json.errors;\n      if (json.errors.length === 1) message = json.errors[0].title;\n    }\n    if (!message) message = xhr.statusText || 'An error occurred while sending the request';\n    super(message);\n    this.message = message;\n    this.name    = name;\n    this.status  = xhr.status;\n    if (errors_from_server) this.errors_from_server = errors_from_server;\n    if (responseText) this.responseText = responseText;\n  }\n}\n\nexport const httpJSON = {\n  get(req) {\n    if (req instanceof Array)\n      return Promise.all(req.map(elem => httpJSON.get(elem)));\n    if (typeof req === 'string')\n      return httpJSON.get({url: req});\n    const {url, data} = req;\n    return new Promise((resolve, reject) => {\n      let request = _base_request(resolve, reject);\n      request.open('GET', _encode_uri(url, Object.assign({}, data)));\n      request.setRequestHeader('Content-Type', 'application/json');\n      request.setRequestHeader('Accept', 'application/json');\n      if (document.querySelector('[name=\"csrf-token\"]')) {\n        const token = document.querySelector('[name=\"csrf-token\"]').getAttribute('content');\n        if (token) request.setRequestHeader('X-CSRF-Token', token);\n      }\n      request.send();\n    });\n  },\n  post(req) {\n    if (req instanceof Array)\n      return Promise.all(req.map(elem => httpJSON.post(elem)));\n    const {url, data} = req;\n    return new Promise((resolve, reject) => {\n      let request = _base_request(resolve, reject);\n      request.open('POST', url);\n      request.setRequestHeader('Content-Type', 'application/json');\n      request.setRequestHeader('Accept', 'application/json');\n      if (document.querySelector('[name=\"csrf-token\"]')) {\n        const token = document.querySelector('[name=\"csrf-token\"]').getAttribute('content');\n        if (token) request.setRequestHeader('X-CSRF-Token', token);\n      }\n      request.send(JSON.stringify(data));\n    });\n  },\n  patch(req) {\n    if (req instanceof Array)\n      return Promise.all(req.map(elem => httpJSON.patch(elem)));\n    const {url, data} = req;\n    return new Promise((resolve, reject) => {\n      let request = _base_request(resolve, reject);\n      request.open('PATCH', url);\n      request.setRequestHeader('Content-Type', 'application/json');\n      request.setRequestHeader('Accept', 'application/json');\n      if (document.querySelector('[name=\"csrf-token\"]')) {\n        const token = document.querySelector('[name=\"csrf-token\"]').getAttribute('content');\n        if (token) request.setRequestHeader('X-CSRF-Token', token);\n      }\n      request.send(JSON.stringify(data));\n    });\n  },\n  delete(req) {\n    if (req instanceof Array)\n      return Promise.all(req.map(elem => httpJSON.patch(elem)));\n    if (typeof req === 'string')\n      return httpJSON.delete({url: req});\n    const {url, data} = req;\n    return new Promise((resolve, reject) => {\n      let request = _base_request(resolve, reject);\n      request.open('DELETE', _encode_uri(url, Object.assign({}, data)));\n      if (document.querySelector('[name=\"csrf-token\"]')) {\n        const token = document.querySelector('[name=\"csrf-token\"]').getAttribute('content');\n        if (token) request.setRequestHeader('X-CSRF-Token', token);\n      }\n      request.send();\n    });\n  }\n};\n\nexport function create_observable(vm, attr_name, attr_val) {\n  return vm[attr_name] = ko.observable().extend({\n    postable: attr_name,\n    initial_value: attr_val\n  });\n}\n\nexport function parse_json_api_response(response, opts={}) {\n  if (!response) return;\n\n  if (response.included) opts.get_included_record = _get_included(response.included);\n\n  if (response.data instanceof Array)\n    return response.data.map(elem => _remap_with_included_records(elem, opts));\n  else\n    return _remap_with_included_records(response.data, opts);\n}\n\nexport function init_relationship(vm, rel_name, rel_data, client_defined_relationships=[]) {\n  const client_defined_relationship = client_defined_relationships.find(r => {\n    return r.name === rel_name;\n  });\n  const obs = vm[rel_name] || (vm[rel_name] = (rel_data instanceof Array ? ko.observableArray([]) : ko.observable()));\n\n  if (client_defined_relationship && client_defined_relationship.allow_destroy)\n    vm[`non_deleted_${rel_name}`] = ko.computed(() => {\n      return obs().filter(obj => {\n        return obj.loading ? (!obj.loading() && !obj.marked_for_deletion()) : !obj.marked_for_deletion();\n      });\n    });\n\n  return Promise.resolve({rel_name, rel_data, client_defined_relationship, obs});\n}\nexport function build_relationship(vm, rel_name, rel_data, obs, {client_defined_relationship, get_included_record}={}) {\n  let done = Promise.resolve();\n  if (rel_data instanceof Array) {\n    let records = rel_data;\n\n    if (get_included_record)\n      records = records.map(rec => _remap_with_included_records(rec, {get_included_record}));\n\n    if (client_defined_relationship) {\n      if (client_defined_relationship.nested_attributes_accepted)\n        obs.extend({\n          nestable: rel_name,\n          initial_length: records.length,\n          watch_for_pending_changes: true\n        });\n\n      if (client_defined_relationship.class) {\n        const klass = client_defined_relationship.class;\n\n        records = records.map(r => new klass(vm, r));\n\n        if (klass.prototype.doneLoading) done = Promise.all(records.map(r => r.doneLoading()));\n\n        if (client_defined_relationship.blank_value)\n          obs.extend({\n            pushable: {\n              klass,\n              this_arg: vm,\n              args: [\n                client_defined_relationship.blank_value\n              ]\n            }\n          });\n      }\n    }\n    obs(records);\n\n  } else if (rel_data) {\n    let remapped = _remap_with_included_records(rel_data, {get_included_record});\n    let record;\n\n    if (client_defined_relationship) {\n      if (client_defined_relationship.nested_attributes_accepted)\n        obs.extend({\n          nestable: rel_name,\n          watch_for_pending_changes: true\n        });\n      if (client_defined_relationship.class) {\n        const klass = client_defined_relationship.class;\n        record = new klass(vm, Object.assign({}, remapped));\n\n        if (klass.prototype.doneLoading) done = record.doneLoading();\n      }\n    }\n    obs(record || remapped);\n\n  } else {\n    let record;\n\n    if (client_defined_relationship) {\n      if (client_defined_relationship.nested_attributes_accepted)\n        obs.extend({\n          nestable: rel_name,\n          watch_for_pending_changes: true\n        });\n      if (client_defined_relationship.class) {\n        const klass = client_defined_relationship.class;\n        const blank_value = client_defined_relationship.blank_value || {};\n\n        record = new klass(vm, Object.assign({}, typeof blank_value === 'function' ? blank_value.call(vm) : blank_value));\n\n        if (klass.prototype.doneLoading) done = record.doneLoading();\n      }\n    }\n    obs(record || {});\n  }\n  return done.then(() => obs());\n}\n\nexport function create_relationships(vm, relationships_map, {get_included_record, client_defined_relationships}={}) {\n  return Promise.all(\n    [...relationships_map].map(_init_relationship(vm, client_defined_relationships))\n  )\n  .then(resolutions => Promise.all(\n    resolutions.map(_build_relationship(vm, get_included_record))\n  ));\n}\n\nexport function create_relationship(vm, rel_name, rel_data, {get_included_record, client_defined_relationships}={}) {\n  return init_relationship(vm, rel_name, rel_data, client_defined_relationships)\n  .then(_build_relationship(vm, get_included_record));\n}\n","import ko from 'ko';\n\n/*eslint no-unused-vars: 0, no-console: 0 */\n\nfunction _get_included(included){\n  return ({id, type}) => included.find(v => (\n    Number.parseInt(v.id, 10) === Number.parseInt(id, 10)\n  ) && v.type === type);\n}\n\nfunction _initKOFormVMFromJsonApiResponse(vm, response) {\n  const record = response.data;\n  const client_defined_relationships = vm.options.relationships;\n  const server_defined_relationships = record.relationships || {};\n  const server_defined_attributes = record.attributes || {};\n  const get_included_record = response.included && _get_included(response.included) || null;\n  const observable_attributes_blacklist = vm.options.observable_attributes_blacklist || [];\n\n  vm.id = record.id;\n  vm.id && (vm.id = Number.parseInt(vm.id, 10));\n  vm.type = record.type;\n\n  vm._url = vm.url = server_defined_attributes.url;\n  delete server_defined_attributes.url;\n\n  const relationship_names = Object.keys(server_defined_relationships);\n\n  relationship_names.forEach(relationship_name => {\n    if (observable_attributes_blacklist.includes(relationship_name)) {\n      vm[relationship_name] = server_defined_attributes[relationship_name];\n    } else {\n      vm.observables_list.push(ko_extras.json_api_utils.create_observable(\n        vm,\n        relationship_name,\n        server_defined_attributes[relationship_name]\n      ));\n    }\n  });\n\n  return Promise.all(\n    relationship_names.map(key => ko_extras.json_api_utils.init_relationship(\n      vm,\n      key,\n      server_defined_relationships[key].data,\n      client_defined_relationships\n    ))\n  ).then(relationship_params => Promise.all(\n    relationship_params.map(({rel_name, rel_data, obs, client_defined_relationship}) => {\n      vm.relationships.push(obs);\n      return json_api_utils.build_relationship(vm, rel_name, rel_data, obs, {\n        get_included_record,\n        client_defined_relationship\n      });\n    })\n  ));\n}\n\nfunction _initNestedVMs(vm, vm_map) {\n  return vm_map && Promise.all([...vm_map].map(([nested_vm_name, nested_vm]) => {\n    vm[nested_vm_name] = nested_vm;\n    nested_vm.error_message.subscribe(vm.error_message);\n    return nested_vm.doneLoading();\n  })) || Promise.resolve();\n}\n\nfunction _sendRequests(requests) {\n  return ko_extras\n    .json_api_utils\n    .httpJSON\n    .get(requests)\n    .catch(xhr => {\n      throw new ko_extras.json_api_utils.RequestError(xhr);\n    });\n}\n\nexport default class KOFormBase {\n\n  init(opts) {\n    if (this.init_begun || this.init_finalized)\n      throw new Error('Cannot init more than once');\n\n    if (!opts.url) throw new Error('Please provide a URL');\n    this.init_begun = true;\n    const {url, request_opts, other_requests} = this.options = opts;\n    const requests = [\n      {url, data: Object.assign({}, request_opts)},\n      ...(other_requests || []).map(req => {\n        return typeof req === 'string' ? {url: req, data: {}} : {\n          url: req.url,\n          data: Object.assign({}, req.request_opts)\n        };\n      })\n    ];\n    return Promise.all([\n      _sendRequests(requests),\n      _initNestedVMs(this, opts.nested_vms)\n    ])\n    .then(([[main_response, ...other_responses]]) => {\n      return _initKOFormVMFromJsonApiResponse(this, main_response)\n        .then(() => Promise.all([\n          other_responses.length && this.handleOtherRequests(other_responses) || Promise.resolve(),\n          this.finalizeInit()\n        ]));\n    })\n    .then(() => delete this.init_begun);\n  }\n\n  handleOtherRequests(responses) {\n    // Overload this method to handle responses\n  }\n\n  finalizeInit() {\n    if (this.init_finalizing || this.init_finalized)\n      throw new Error('Cannot finalize init more than once');\n\n    this.init_finalizing = true;\n    const errorable = this.observables_list.filter(obs => obs.hasError),\n      observables_with_initial_values = this.observables_list.filter(obs => {\n        return obs.initial_value || obs.initial_length;\n      });\n    this.errors = {};\n    errorable.forEach(obs => {\n      if (obs.postable_name)\n        this.errors[obs.postable_name] = ko.computed(() => {\n          return obs.hasError() && obs.validationMessage() || null;\n        });\n      else if (obs.errorable_observables)\n        this.errors[obs.errorable_name] = ko.computed(() => {\n          return obs.hasError() && obs.errors() || null;\n        });\n    });\n    this.numErrors = this.numErrors || ko.computed(() => {\n      return errorable.reduce(((total, obs) => {\n        return total + (obs.hasError() ? (obs.numErrors ? obs.numErrors() : 1) : 0);\n      }), 0);\n    });\n\n    this.is_valid = ko.computed(() => {\n      let is_valid = this.numErrors() === 0;\n      if (is_valid) {\n        if (this.validation_messenger) {\n          this.validation_messenger.cancel();\n          delete this.validation_messenger;\n        }\n      }\n      return is_valid;\n    }).extend({notify: 'always'});\n\n    this.no_changes_pending = ko.computed(() => {\n      const relationships_pendings = this.relationships.map(obs => {\n        const c = obs.no_changes_pending;\n        const l = obs.initial_length;\n\n        return (c ? c() : true) && (l ? l() === obs().length : true);\n      });\n\n      const observable_value_pairs = observables_with_initial_values.map(obs => {\n        return obs.initial_value ? obs() === obs.initial_value() : obs().length === obs.initial_length();\n      });\n\n      return relationships_pendings.every(p => p) && observable_value_pairs.every(p => p);\n    }).extend({notify: 'always'});\n\n    this.changes_pending = ko.computed(() => !this.no_changes_pending()).extend({notify: 'always'});\n\n    if (this.options.save_after_edit) {\n      const reify_method = this.options.save_after_edit.reify_method;\n      const should_save = ko.computed(() => {\n        const [changes_pending, is_valid] = [this.changes_pending(), this.is_valid()];\n        return changes_pending && (this.id || is_valid);\n      }).extend({\n        rateLimit: {\n          method: 'notifyWhenChangesStop',\n          timeout: this.options.save_after_edit.rate_limit || 500\n        },\n        notify: 'always'\n      });\n\n      this.saving_locked = false;\n\n      should_save.subscribe(should => {\n        if (should && !this.saving_locked) {\n          this.save()\n          .then(record => reify_method && this[reify_method](record))\n          .catch(err => {\n            if (typeof err === 'string')\n              this.validation_messenger = errorNotice({notice: err, id: 'validation'});\n            else {\n              this.saving_locked = true;\n              this.error_message(err);\n            }\n          });\n        }\n      });\n    }\n    delete this.init_finalizing;\n    this.init_finalized = true;\n  }\n\n  constructor() {\n    Object.assign(this, {\n      loading:          ko.observable(true),\n      attempted:        ko.observable(false),\n      error_message:    ko.observable(null),\n      observables_list: [],\n      relationships:    []\n    });\n  }\n\n  saveAndReload() {\n    let action = this.id ? 'update' : 'create';\n    this.save()\n    .then(record => {\n      successNotice({notice: `Record ${action}d`});\n      window.location = record && record.url ? record.url : this.url;\n    }).catch(err => {\n      if (typeof err === 'string')\n        this.validation_messenger = errorNotice({notice: err, id: 'validation'});\n      else if (err instanceof Error) {\n        console.log(err);\n        errorNotice({notice: err.message});\n      }\n    });\n  }\n\n\n  save() {\n    return new Promise((resolve, reject) => {\n      this.attempted(true);\n      const numErrors = this.numErrors();\n      if (numErrors) {\n        reject(`There ${numErrors === 1 ? 'is 1 error which prevents' : `are ${numErrors} errors which prevent`} this form from being submitted.`);\n        return;\n      }\n\n      ko_extras.json_api_utils.httpJSON[this.id ? 'patch' : 'post']({\n        url: this.url,\n        data: {\n          data: {\n            id:         this.id,\n            type:       this.type,\n            attributes: this.serialize()\n          }\n        }\n      })\n      .then(response => {\n        const record = ko_extras.json_api_utils.parse_json_api_response(response);\n        if (record) {\n          this.id  = record.id;\n          this.url = record.url;\n        }\n        resolve(record);\n      })\n      .catch(xhr => reject(new ko_extras.json_api_utils.RequestError(xhr)));\n    });\n  }\n\n  serialize() {\n    let json = {};\n    this.observables_list.forEach(obs => {\n      let pname = obs.postable_name;\n      let nname = obs.nestable_name;\n      let val   = obs();\n\n      if (pname)\n        json[pname] = val instanceof Date ? val.toISOString() : val;\n      else if (nname)\n        json[nname] = obs.initial_length ? val.map(_serialize) : val.serialize();\n    });\n\n    this.relationships.forEach(obs => {\n      let nname = obs.nestable_name;\n      let val   = obs();\n      if (nname)\n        json[nname] = obs.initial_length ? val.map(_serialize) : val.serialize();\n    });\n    return json;\n  }\n\n  unsetObservables() {\n    delete this.id;\n    this.url = this._url;\n    this.observables_list.forEach(obs => obs('push' in obs ? [] : undefined));\n    this.attempted(false);\n  }\n\n  doneLoading() {\n    return this.loading() && new Promise((resolve, reject) => {\n      let e, l;\n      e = this.error_message.subscribe(err => {\n        l.dispose();\n        e.dispose();\n        reject(err);\n      });\n      l = this.loading.subscribe(() => {\n        l.dispose();\n        e.dispose();\n        if (this.error_message()) reject(this.error_message());\n        else resolve();\n      });\n    }) || Promise.resolve();\n  }\n}\n","import ko from 'ko';\nimport * as json_api_utils from './json-api-utils';\nimport KOFormBase from './ko-form-base';\nimport extenders from './ko-extenders';\n\nObject.assign(ko.extenders, extenders);\n\nexport default {\n  json_api_utils,\n  KOFormBase\n};\n"],"names":["ko","_get_included"],"mappings":"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"}